<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arduino servo</title>
  </head>
  <body>
    <script src="https://app.protobject.com/framework/p.js"></script>
    <script src="config.js"></script>
    <h1>Arduino servo control</h1>

    <script>
      // Empezar a leer aceleraciÃ³n cada 300ms
      Protobject.Acceleration.start(300);

      Protobject.Acceleration.onData((data) => {
        console.log("X: " + data.x + "; Y: " + data.y + "; Z: " + data.z);

        // norma del vector (magnitud)
        const norm = Math.sqrt(
          data.x * data.x +
          data.y * data.y +
          data.z * data.z
        );

        // ðŸ‘‰ ENVIAR al index.html (Knob) usando la API oficial
        Protobject.Core.send({
          type: "acceleration",
          norm: norm
        }).to("index.html");
      });

      // (opcional) podrÃ­as usar umbrales acÃ¡ si quieres filtrar sacudidas
    </script>
  </body>
</html>
